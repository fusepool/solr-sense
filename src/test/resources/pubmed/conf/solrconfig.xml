<?xml version="1.0" encoding="UTF-8" ?>
<config>

  <luceneMatchVersion>LUCENE_40</luceneMatchVersion>

<!--  
<lib dir="/opt/solr/lib/dist/" regex=".*\.jar" />
  <lib dir="/opt/solr/lib/contrib/**/lib" regex=".*\.jar" />

  <lib dir="/opt/solr/lib/searchbox" regex=".*\.jar" />
-->



  <dataDir>${solr.data.dir:}</dataDir>


  <directoryFactory name="DirectoryFactory" 
                    class="${solr.directoryFactory:solr.NRTCachingDirectoryFactory}"/> 

  <indexConfig>
   
  </indexConfig>

  <jmx />

  <!-- The default high-performance update handler -->
  <updateHandler class="solr.DirectUpdateHandler2">

     <autoCommit> 
       <maxTime>15000</maxTime> 
       <openSearcher>false</openSearcher> 
     </autoCommit>


    <updateLog>
      <str name="dir">${solr.data.dir:}</str>
    </updateLog>
   

  </updateHandler>
  

  <query>

    <maxBooleanClauses>1024</maxBooleanClauses>


    <filterCache class="solr.FastLRUCache"
                 size="512"
                 initialSize="512"
                 autowarmCount="0"/>

    <queryResultCache class="solr.LRUCache"
                     size="512"
                     initialSize="512"
                     autowarmCount="0"/>

    <documentCache class="solr.LRUCache"
                   size="512"
                   initialSize="512"
                   autowarmCount="0"/>

    <enableLazyFieldLoading>true</enableLazyFieldLoading>

   <queryResultWindowSize>20</queryResultWindowSize>

   <!-- Maximum number of documents to cache for any entry in the
        queryResultCache. 
     -->
   <queryResultMaxDocsCached>200</queryResultMaxDocsCached>

    <listener event="newSearcher" class="solr.QuerySenderListener">
      <arr name="queries">
        <!--
           <lst><str name="q">solr</str><str name="sort">price asc</str></lst>
           <lst><str name="q">rocks</str><str name="sort">weight asc</str></lst>
          -->
      </arr>
    </listener>
    <listener event="firstSearcher" class="solr.QuerySenderListener">
      <arr name="queries">
        <lst>
          <str name="q">static firstSearcher warming in solrconfig.xml</str>
          <str name="defType">sense</str>
        </lst>
      </arr>
    </listener>


    <useColdSearcher>false</useColdSearcher>

    <maxWarmingSearchers>2</maxWarmingSearchers>

  </query>


  <requestDispatcher handleSelect="false" >

    <requestParsers enableRemoteStreaming="true" 
                    multipartUploadLimitInKB="2048000" />

    <httpCaching never304="true" />

  </requestDispatcher>


  <requestHandler name="/select" class="solr.SearchHandler">
    <!-- default values for query parameters can be specified, these
         will be overridden by parameters in the request
      -->
     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <int name="rows">10</int>
       <str name="df">title</str>
     </lst>
    
    </requestHandler>




  <requestHandler name="/update" class="solr.UpdateRequestHandler">
    <!-- See below for information on defining 
         updateRequestProcessorChains that can be used by name 
         on each Update Request
      -->
    <!--
       <lst name="defaults">
         <str name="update.chain">dedupe</str>
       </lst>
       -->
  </requestHandler>

 
  <!-- Admin Handlers

       Admin Handlers - This will register all the standard admin
       RequestHandlers.  
    -->
    <requestHandler name="/admin/" 
                    class="solr.admin.AdminHandlers" />
    
    <admin>
        <defaultQuery>*:*</defaultQuery>
    </admin>


    <queryParser name="sense" class="com.searchbox.solr.SenseQParserPlugin">
        <!--    
        <lst name="ckbs">
            <lst name="1">
                <str name="jndi">searchbox/PubMedSparseEN</str>
            </lst>
        </lst>
        -->
        <lst name="ckbs">
            <lst name="1">
                <str name="name">pubmed Sparse EN"</str>
                <double name="certainty_value">16.1014593340993</double>
                <double name="maximum_distance">1.4059477152206</double>
                <str name="type">SPARSE</str>
                <str name="locale">en</str>
                <str name="basedirectory">CKB/pubmed</str>
                <str name="modelfile">pubmed.cache</str>
                <str name="idffile">pubmed.idflog</str>
                <str name="dictionary">pubmed.tdic</str>
            </lst>
        </lst>
        
        <lst name="defaults">
          <float name="ckb.1.weight">.8</float>
        </lst>
    </queryParser>

</config>
